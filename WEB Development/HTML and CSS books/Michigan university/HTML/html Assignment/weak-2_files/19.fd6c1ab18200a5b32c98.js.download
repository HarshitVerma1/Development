(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"5A/O":function(module,e,t){"use strict";var n=t("VYij"),r=t.n(n),o=t("UAeG"),a=t("jsrg"),s=t("VXRf"),i=t("PDuk"),u=t.n(i),c=t("sQ/U"),p=t("8z5R"),l=t("vn3c"),m=t("SaLm"),d=t("bmRM"),f=r.a.compose(o.a.createContainer(function(e){var t=e.itemMetadata,n=t.getId(),r=t.get("course").get("id");return{prompt:p.a.get(Object(i.tupleToStringKey)([c.a.get().id,r,n]),{includes:p.a.DEFAULT_INCLUDES,fields:p.a.DEFAULT_FIELDS})}}),o.a.createContainer(function(e){var t=e.prompt;if(!t||!t.promptType)return{};var n=t.promptType.definition.courseItemForumQuestionId,r=[t.userId,n].join("~");return{discussionPromptQuestion:l.a.localGet(r,{fields:l.a.DEFAULT_FIELDS})}}),Object(a.a)(function(e){var t;return!!e.discussionPromptQuestion}),Object(s.a)(function(e){var t=e.discussionPromptQuestion,n=t&&t.id.split("~")[3],r;return{isLoaded:!0,questionId:n,question:{id:n,questionId:n,type:"question",forumType:m.j.rootForumType},promptContent:t&&t.content.details,learnerCount:t&&t.totalAnswerCount}}))(d.a);e.a=f},"8z5R":function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),o=t("HlCP"),a=t("vn3c"),s=function(e){function OnDemandDiscussionPrompts(){return e.apply(this,arguments)||this}return r()(OnDemandDiscussionPrompts,e),OnDemandDiscussionPrompts}(o.a);s.RESOURCE_NAME="onDemandDiscussionPrompts.v1",s.DEFAULT_INCLUDES=["question"],s.DEFAULT_FIELDS=["promptType","".concat(a.a.RESOURCE_NAME,"(").concat(a.a.DEFAULT_FIELDS.join(","),")")],e.a=s},BMks:function(module,e,t){"use strict";t.d(e,"b",function(){return A}),t.d(e,"d",function(){return L}),t.d(e,"a",function(){return j}),t.d(e,"c",function(){return O});var n=t("VbXa"),r=t.n(n),o=t("sbe7"),a=t.n(o),s=t("eJMc"),i=t.n(s),u=t("VYij"),c=t.n(u),p=t("17x9"),l=t.n(p),m=t("wiyT"),d=t.n(m),f=t("CWYE"),v=t("BDKN"),h=t.n(v),g=t("hN99"),E=t("y1LI"),b=t("rcV8"),I=t("8cuT"),C=t.n(I),y=t("ZEYT"),D=t("6R2g"),S=t("V4Vm"),w=t("SaLm"),x=t("GP6s"),N=t.n(x),P=4,q=function(e){function RespondedLearnersImageBaseComponent(){return e.apply(this,arguments)||this}r()(RespondedLearnersImageBaseComponent,e);var t=RespondedLearnersImageBaseComponent.prototype;return t.renderMorePeopleImage=function renderMorePeopleImage(){if(this.props.responseCount>4){var e=Object(S.a)(this.props.responseCount-4,!0);return a.a.createElement("li",{className:"bgcolor-black-g3"},a.a.createElement("div",{className:"horizontal-box align-items-absolute-center num-responder-images caption-text"},"+",e))}return null},t.render=function render(){var e=this.props.answers,t=e&&e.filter(function(e,t){return t<4}).map(function(e){return{image:e.creator.photoUrl,name:e.creator.fullName}});if(!t||0===t.length)return null;return a.a.createElement("ul",{className:"nostyle horizontal-box align-items-absolute-center learner-image-list"},t.map(function(e){var t=e.name,n=e.image;return a.a.createElement("li",{key:t},a.a.createElement(D.a,{width:32,height:32,fullName:t,profileImageUrl:n}))}),this.renderMorePeopleImage())},RespondedLearnersImageBaseComponent}(a.a.Component);q.propTypes={responseCount:l.a.number.isRequired,answers:l.a.array};var A=function(e){function Input(){return e.apply(this,arguments)||this}var t;return r()(Input,e),Input.prototype.render=function render(){var e=this.props,t=e.question,n=e.savingState,r=e.placeholder;return a.a.createElement("div",{className:"horizontal-box align-items-left theme-light c-prompt-card"},a.a.createElement(y.a,{hideFollow:!0,question:t,parentPost:t,savingState:n,placeholder:N()(r)}))},Input}(a.a.Component);A.propTypes={placeholder:l.a.string.isRequired,question:l.a.object.isRequired,savingState:l.a.string.isRequired};var L=function(e){function Saving(){return e.apply(this,arguments)||this}var t;return r()(Saving,e),Saving.prototype.render=function render(){return a.a.createElement("div",{className:"horizontal-box align-items-absolute-center bgcolor-white c-prompt-card color-hint-text"},a.a.createElement(E.a,{name:"spinner",className:"cif-spin"}),a.a.createElement("span",{className:"caption-text"},N()("Submitting Your Response")))},Saving}(a.a.Component),R=function(e){function CompletedBaseComponent(){return e.apply(this,arguments)||this}var t;return r()(CompletedBaseComponent,e),CompletedBaseComponent.prototype.render=function render(){var e=this.props.url;return a.a.createElement("div",{className:"vertical-box align-items-absolute-center bgcolor-white c-prompt-card"},a.a.createElement("span",{className:"color-secondary-text"},N()("Your response has been submitted. Engage and discuss with other learners below!")),this.props.url&&a.a.createElement(i.a,{className:"link-button secondary",to:e},N()("View My Response")))},CompletedBaseComponent}(a.a.Component);R.propTypes={showLink:l.a.bool,questionId:l.a.string.isRequired,url:l.a.string};var T={Input:A,Saving:L,Completed:c.a.compose(Object(b.a)(function(e){if(e.showLink){var t=Object(f.a)("/api/onDemandCourseForumAnswers.v1/",{type:"rest"}),n=[e.userId,e.courseId,e.questionId].join("~"),r=(new h.a).addQueryParam("q","byForumQuestionId").addQueryParam("userCourseQuestionId",n).addQueryParam("sort","createdAtAsc").addQueryParam("creatorId",e.userId).toString();return d()(t.get(r)).then(function(e){if(!e.elements.length)return{url:void 0};var t;return{url:Object(g.b)(e.elements[0].forumAnswerId)}})}return d()({url:void 0})}))(R),RespondedLearnersImage:c.a.compose(C()(["ThreadDetailsStore"],function(e,t){var n=e.ThreadDetailsStore,r=t.questionId,o=t.page;return{answers:n.getReplies(r,o,w.c.newestSort)||[]}}))(q)},j=T.Completed,O=T.RespondedLearnersImage,F=T},CADO:function(module,exports,e){},GmVJ:function(module,e,t){"use strict";t.r(e);var n=t("VbXa"),r=t.n(n),o=t("Yt/I"),a=t.n(o),s=t("K2XA"),i=t("sbe7"),u=t.n(i),c=t("geBo"),p=t("WdIA"),l=t.n(p),m=function(e){function DiscussionPromptWrapper(){return e.apply(this,arguments)||this}var t;return r()(DiscussionPromptWrapper,e),DiscussionPromptWrapper.prototype.render=function render(){var e=this.props,t=e.computedItem,n=e.itemMetadata;return u.a.createElement(s.a,{className:"rc-DiscussionPromptWrapper",hideFeedback:!0},u.a.createElement("div",{className:"discussion-prompt-content"},u.a.createElement("div",{className:"vertical-box align-items-vertical-center"},u.a.createElement("div",null,u.a.createElement("span",{className:"cif-stack cif-2x","aria-label":a()("Discussion Prompt")},u.a.createElement("i",{className:"cif-circle cif-stack-2x c-prompt-icon"}),u.a.createElement("i",{className:"cif-comment cif-stack-1x cif-inverse comment-icon"}))),u.a.createElement("h2",{className:"c-prompt-title"},t.name)),u.a.createElement(c.a,{itemMetadata:n,previouslyCompleted:t.isCompleted})))},DiscussionPromptWrapper}(u.a.Component);e.default=m},PENF:function(module,e,t){"use strict";var n=t("VYij"),r=t.n(n),o=t("UAeG"),a=t("jsrg"),s=t("VXRf"),i=t("kqb2"),u=t("SaLm"),c=t("bmRM"),p,l=r.a.compose(o.a.createContainer(function(e){var t=e.itemMetadata,n=t.getId(),r=t.get("course").get("id");return{legacyDiscussionQuestionResults:i.a.finder("byPromptItem",{params:{courseId:r,itemId:n,sort:u.c.newestSort}})}}),Object(a.a)(function(e){var t;return!!e.legacyDiscussionQuestionResults}),Object(s.a)(function(e){var t=e.legacyDiscussionQuestionResults,n=r()(t).first(),o=n&&n.id,a;return{isLoaded:!0,questionId:o,question:{id:o,questionId:o,type:"question",forumType:u.j.rootForumType},promptContent:n&&n.content.details,learnerCount:n&&(n.answerCount||n.topLevelAnswerCount)}}))(c.a)},RX7l:function(module,exports,e){var t=e("CADO"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},o=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},WdIA:function(module,exports,e){var t=e("Zh10"),n;"string"==typeof t&&(t=[[module.i,t,""]]);var r={transform:void 0},o=e("aET+")(t,r);t.locals&&(module.exports=t.locals)},Zh10:function(module,exports,e){},bmRM:function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),o=t("17x9"),a=t.n(o),s=t("sbe7"),i=t.n(s),u=t("sQ/U"),c=t("kvW3"),p=t("wvdd"),l=t("BZ+2"),m=t("0jv7"),d=t("SaLm"),f=t("y1LI"),v=t("JUgE"),h=t("EWSN"),g=t("BMks"),E=t("GP6s"),b=t.n(E),I=t("RX7l"),C=t.n(I),y=function(e){function DiscussionPrompt(t,n){var r;return(r=e.call(this,t,n)||this).state={savingState:m.e.UNCHANGED,forumError:!1},r}r()(DiscussionPrompt,e);var t=DiscussionPrompt.prototype;return t.componentDidMount=function componentDidMount(){this.props.isLoaded&&(this.setState({questionId:this.props.questionId}),this.fetchAnswers(this.props.questionId,d.c.newestSort,this.props.page))},t.componentWillReceiveProps=function componentWillReceiveProps(e){var t=this.state.questionId;this.setState({savingState:e.savingStates[t]||m.e.UNCHANGED}),t&&this.props.savingStates[t]===m.e.SAVING&&e.savingStates[t]===m.e.SAVED&&this.fetchAnswers(t,d.c.newestSort,this.props.page)},t.componentDidUpdate=function componentDidUpdate(e,t){var n=this.props,r=n.questionId,o=n.page;e.page!==o&&this.fetchAnswers(r,d.c.newestSort,o)},t.fetchAnswers=function fetchAnswers(e,t,n){var r=this.props,o=r.courseId,a=r.courseSlug,s=r.currentForum,i;(0,this.context.executeAction)(p.b,{questionId:e,courseId:o,courseSlug:a,sort:t,page:n,contextId:o,userId:u.a.get().id,forumType:s.forumType.typeName})},t.renderLoading=function renderLoading(){return i.a.createElement("div",{className:"vertical-box align-items-vertical-center"},i.a.createElement(f.a,{name:"spinner",className:"cif-spin cif-3x"}))},t.renderInput=function renderInput(){var e=this.props,t=e.learnerCount,n=e.question,r=e.questionId,o=e.page,a=t>0;return i.a.createElement("div",null,i.a.createElement("div",{className:"color-hint-text participation-text"},b()("Participation is optional")),i.a.createElement(g.b,{savingState:this.state.savingState,question:n,placeholder:b()("Type your response here...")}),i.a.createElement(g.c,{responseCount:t,questionId:r,page:o}),i.a.createElement("div",{className:"horizontal-box align-items-absolute-center caption-text color-secondary-text"},a?i.a.createElement("div",null,i.a.createElement(c.c,{value:t}),"Â ",i.a.createElement(c.b,{message:b()("{learnerCount, plural, =1 { learner has} other { learners have}} submitted a response."),learnerCount:t})):i.a.createElement("div",null,b()("Be the first to submit a response"))))},t.renderError=function renderError(){return i.a.createElement("div",{className:"horizontal-box align-items-absolute-center bgcolor-white c-prompt-card"},i.a.createElement("span",{className:"caption-text color-secondary-text"},b()("Sorry, we were unable to retrieve a forum.")))},t.renderCompleted=function renderCompleted(){var e=this.props,t=e.questionId,n=e.previouslyCompleted,r=e.page,o=e.currentForum,a=e.answerId,s=e.currentForumUrl,c=e.courseId;return i.a.createElement("div",null,i.a.createElement(g.a,{showLink:n,questionId:t,userId:u.a.get().id,courseId:c}),i.a.createElement("div",{className:"c-thread-container"},i.a.createElement(h.a,{sort:d.c.newestSort,page:r,forumId:o.id,questionId:t,answerId:a,forumLink:s})))},t.renderContent=function renderContent(){var e=this.state.savingState;if(e===m.e.SAVED||this.props.previouslyCompleted)return this.renderCompleted();if(e===m.e.UNCHANGED)return this.renderInput();if(e===m.e.SAVING)return i.a.createElement(g.d,null);return!1},t.renderBody=function renderBody(){var e=this.props.promptContent;return i.a.createElement("div",null,i.a.createElement("span",null,i.a.createElement(v.a,{cml:e})),this.renderContent())},t.render=function render(){var e=this.props.isLoaded,t=this.state.forumError;return i.a.createElement("div",{className:"rc-DiscussionPrompt"},!t&&(e?this.renderBody():this.renderLoading()),t&&this.renderError())},DiscussionPrompt}(i.a.Component);y.propTypes={savingStates:a.a.object.isRequired,previouslyCompleted:a.a.bool.isRequired,page:a.a.number,answerId:a.a.string,courseId:a.a.string,courseSlug:a.a.string,currentForum:a.a.instanceOf(l.a),currentForumUrl:a.a.string,questionId:a.a.string,question:a.a.object,promptContent:a.a.object,learnerCount:a.a.number,isLoaded:a.a.bool},y.contextTypes={executeAction:a.a.func.isRequired,router:a.a.object.isRequired},e.a=y},geBo:function(module,e,t){"use strict";t.d(e,"a",function(){return w});var n=t("VbXa"),r=t.n(n),o=t("MVZn"),a=t.n(o),s=t("17x9"),i=t.n(s),u=t("sbe7"),c=t.n(u),p=t("VYij"),l=t.n(p),m=t("ngyh"),d=t.n(m),f=t("+LJP"),v=t("8cuT"),h=t.n(v),g=t("pqXt"),E=t("5A/O"),b=t("PENF"),I=t("oQ9N"),C=t("KMW/"),y=t("UU2Q"),D=function discussionPromptContainer(){return E.a},S=Object(p.compose)(Object(I.a)({fields:["forumType","urlId"]}),Object(f.a)(function(e,t){return a()({},Object(g.a)(e,t),{page:e.location.query.page?parseInt(e.location.query.page,10):1,answerId:e.location.query.answerId?e.location.query.answerId:void 0})}),h()(["ThreadDetailsStore"],function(e,t){var n=e.ThreadDetailsStore,r=t.itemMetadata;return{savingStates:Object.assign({},n.savingStates)}}))(D()),w=function(e){function FluxibleConnectedDiscussionPrompt(){return e.apply(this,arguments)||this}r()(FluxibleConnectedDiscussionPrompt,e);var t=FluxibleConnectedDiscussionPrompt.prototype;return t.componentWillMount=function componentWillMount(){this.fluxibleContext=Object(y.a)(this.context.fluxibleContext)},t.render=function render(){return c.a.createElement(d.a,{context:this.fluxibleContext.getComponentContext()},c.a.createElement(S,this.props))},FluxibleConnectedDiscussionPrompt}(c.a.Component);w.contextTypes={fluxibleContext:i.a.object}},kqb2:function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),o,a=function(e){function OnDemandDiscussionQuestions(){return e.apply(this,arguments)||this}return r()(OnDemandDiscussionQuestions,e),OnDemandDiscussionQuestions}(t("HlCP").a);a.RESOURCE_NAME="onDemandDiscussionQuestions.v1",e.a=a},vn3c:function(module,e,t){"use strict";var n=t("VbXa"),r=t.n(n),o,a=function(e){function OnDemandDiscussionPromptQuestions(){return e.apply(this,arguments)||this}return r()(OnDemandDiscussionPromptQuestions,e),OnDemandDiscussionPromptQuestions}(t("HlCP").a);a.RESOURCE_NAME="onDemandDiscussionPromptQuestions.v1",a.DEFAULT_FIELDS=["content","creatorId","createdAt","forumId","sessionId","lastAnsweredBy","lastAnsweredAt","totalAnswerCount","topLevelAnswerCount","viewCount"],e.a=a}}]);
//# sourceMappingURL=19.fd6c1ab18200a5b32c98.js.map